
. 
. // Setup
. set obs 10000
number of observations (_N) was 0, now 10,000

. gen reviewer = mod(_n - 1, 10) + 1

. gen group = ceil(_n / 10)

. 
. // Assign
. qui peerreview reviewer, r(3) by(group)

. egen mean = rowmean(review?)

. 
. // Check whether the rowmean is significantly different from its expectation
. qui reg mean i.reviewer

. margins i.reviewer, post

Adjusted predictions                            Number of obs     =     10,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    reviewer |
          1  |   6.045333   .0449287   134.55   0.000     5.957264    6.133403
          2  |      5.884   .0449287   130.96   0.000     5.795931    5.972069
          3  |   5.764667   .0449287   128.31   0.000     5.676597    5.852736
          4  |   5.688333   .0449287   126.61   0.000     5.600264    5.776403
          5  |   5.529333   .0449287   123.07   0.000     5.441264    5.617403
          6  |   5.502333   .0449287   122.47   0.000     5.414264    5.590403
          7  |      5.376   .0449287   119.66   0.000     5.287931    5.464069
          8  |   5.190667   .0449287   115.53   0.000     5.102597    5.278736
          9  |   5.055667   .0449287   112.53   0.000     4.967597    5.143736
         10  |   4.963667   .0449287   110.48   0.000     4.875597    5.051736
------------------------------------------------------------------------------

. 
. forval i = 1/10 {
  2.         local expectation = (1+2+3+4+5+6+7+8+9+10-`i')/9
  3.         local xlincom_exp `xlincom_exp' (`i'.reviewer - `expectation')
  4. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.reviewer - 6 = 0
        lc_2:  2.reviewer - 5.888888888888889 = 0
        lc_3:  3.reviewer - 5.777777777777778 = 0
        lc_4:  4.reviewer - 5.666666666666667 = 0
        lc_5:  5.reviewer - 5.555555555555555 = 0
        lc_6:  6.reviewer - 5.444444444444445 = 0
        lc_7:  7.reviewer - 5.333333333333333 = 0
        lc_8:  8.reviewer - 5.222222222222222 = 0
        lc_9:  9.reviewer - 5.111111111111111 = 0
       lc_10:  10.reviewer - 5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |   .0453333   .0449287     1.01   0.313    -.0427361    .1334027
        lc_2 |  -.0048889   .0449287    -0.11   0.913    -.0929583    .0831805
        lc_3 |  -.0131111   .0449287    -0.29   0.770    -.1011805    .0749583
        lc_4 |   .0216667   .0449287     0.48   0.630    -.0664027    .1097361
        lc_5 |  -.0262222   .0449287    -0.58   0.559    -.1142916    .0618472
        lc_6 |   .0578889   .0449287     1.29   0.198    -.0301805    .1459583
        lc_7 |   .0426667   .0449287     0.95   0.342    -.0454027    .1307361
        lc_8 |  -.0315556   .0449287    -0.70   0.482    -.1196249    .0565138
        lc_9 |  -.0554444   .0449287    -1.23   0.217    -.1435138     .032625
       lc_10 |  -.0363333   .0449287    -0.81   0.419    -.1244027    .0517361
------------------------------------------------------------------------------

. 
. // Check whether column mean is different from expectation
. collapse (mean) review*, by(group)

. reshape long review, i(group) j(nr)
(note: j = 1 2 3)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                     1000   ->    3000
Number of variables                   5   ->       4
j variable (3 values)                     ->   nr
xij variables:
                review1 review2 review3   ->   review
-----------------------------------------------------------------------------

. qui reg review i.nr

. margins i.nr, post

Adjusted predictions                            Number of obs     =      3,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          nr |
          1  |     5.5017   .0247423   222.36   0.000     5.453186    5.550214
          2  |        5.5   .0247423   222.29   0.000     5.451486    5.548514
          3  |     5.4983   .0247423   222.22   0.000     5.449786    5.546814
------------------------------------------------------------------------------

. 
. local xlincom_exp

. local expectation = (1+2+3+4+5+6+7+8+9+10) / 10

. forval i = 1/3 {
  2.         local xlincom_exp `xlincom_exp' (`i'.nr - `expectation')
  3. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.nr - 5.5 = 0
        lc_2:  2.nr - 5.5 = 0
        lc_3:  3.nr - 5.5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |      .0017   .0247423     0.07   0.945    -.0468137    .0502137
        lc_2 |   2.62e-09   .0247423     0.00   1.000    -.0485137    .0485137
        lc_3 |     -.0017   .0247423    -0.07   0.945    -.0502137    .0468137
------------------------------------------------------------------------------

. 
. log close
