
. 
. // Setup
. set obs 10000
number of observations (_N) was 0, now 10,000

. gen reviewer = mod(_n - 1, 10) + 1

. gen group = ceil(_n / 10)

. 
. // Assign
. qui peerreview reviewer, r(3) by(group)

. egen mean = rowmean(review?)

. 
. // Check whether the rowmean is significantly different from its expectation
. qui reg mean i.reviewer

. margins i.reviewer, post

Adjusted predictions                            Number of obs     =     10,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    reviewer |
          1  |   6.019667   .0450591   133.60   0.000     5.931342    6.107992
          2  |   5.825333   .0450591   129.28   0.000     5.737008    5.913658
          3  |   5.799667   .0450591   128.71   0.000     5.711342    5.887992
          4  |       5.62   .0450591   124.73   0.000     5.531675    5.708325
          5  |   5.551333   .0450591   123.20   0.000     5.463008    5.639658
          6  |   5.446667   .0450591   120.88   0.000     5.358342    5.534992
          7  |   5.288333   .0450591   117.36   0.000     5.200008    5.376658
          8  |   5.351667   .0450591   118.77   0.000     5.263342    5.439992
          9  |   5.069667   .0450591   112.51   0.000     4.981342    5.157992
         10  |   5.027667   .0450591   111.58   0.000     4.939342    5.115992
------------------------------------------------------------------------------

. 
. forval i = 1/10 {
  2.         local expectation = (1+2+3+4+5+6+7+8+9+10-`i')/9
  3.         local xlincom_exp `xlincom_exp' (`i'.reviewer - `expectation')
  4. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.reviewer - 6 = 0
        lc_2:  2.reviewer - 5.888888888888889 = 0
        lc_3:  3.reviewer - 5.777777777777778 = 0
        lc_4:  4.reviewer - 5.666666666666667 = 0
        lc_5:  5.reviewer - 5.555555555555555 = 0
        lc_6:  6.reviewer - 5.444444444444445 = 0
        lc_7:  7.reviewer - 5.333333333333333 = 0
        lc_8:  8.reviewer - 5.222222222222222 = 0
        lc_9:  9.reviewer - 5.111111111111111 = 0
       lc_10:  10.reviewer - 5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |   .0196667   .0450591     0.44   0.663    -.0686582    .1079915
        lc_2 |  -.0635556   .0450591    -1.41   0.158    -.1518804    .0247693
        lc_3 |   .0218889   .0450591     0.49   0.627     -.066436    .1102137
        lc_4 |  -.0466667   .0450591    -1.04   0.300    -.1349915    .0416582
        lc_5 |  -.0042222   .0450591    -0.09   0.925    -.0925471    .0841026
        lc_6 |   .0022222   .0450591     0.05   0.961    -.0861026    .0905471
        lc_7 |      -.045   .0450591    -1.00   0.318    -.1333248    .0433248
        lc_8 |   .1294444   .0450591     2.87   0.004     .0411196    .2177693
        lc_9 |  -.0414444   .0450591    -0.92   0.358    -.1297693    .0468804
       lc_10 |   .0276667   .0450591     0.61   0.539    -.0606582    .1159915
------------------------------------------------------------------------------

. 
. // Check whether column mean is different from expectation
. collapse (mean) review*, by(group)

. reshape long review, i(group) j(nr)
(note: j = 1 2 3)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                     1000   ->    3000
Number of variables                   5   ->       4
j variable (3 values)                     ->   nr
xij variables:
                review1 review2 review3   ->   review
-----------------------------------------------------------------------------

. qui reg review i.nr

. margins i.nr, post

Adjusted predictions                            Number of obs     =      3,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          nr |
          1  |     5.5183   .0250963   219.88   0.000     5.469092    5.567508
          2  |     5.5068   .0250963   219.43   0.000     5.457592    5.556008
          3  |     5.4749   .0250963   218.16   0.000     5.425692    5.524108
------------------------------------------------------------------------------

. 
. local xlincom_exp

. local expectation = (1+2+3+4+5+6+7+8+9+10) / 10

. forval i = 1/3 {
  2.         local xlincom_exp `xlincom_exp' (`i'.nr - `expectation')
  3. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.nr - 5.5 = 0
        lc_2:  2.nr - 5.5 = 0
        lc_3:  3.nr - 5.5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |      .0183   .0250963     0.73   0.466    -.0309078    .0675078
        lc_2 |      .0068   .0250963     0.27   0.786    -.0424078    .0560078
        lc_3 |     -.0251   .0250963    -1.00   0.317    -.0743078    .0241078
------------------------------------------------------------------------------

. 
. log close
