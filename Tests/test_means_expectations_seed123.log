
. 
. // Setup
. set obs 10000
number of observations (_N) was 0, now 10,000

. gen reviewer = mod(_n - 1, 10) + 1

. gen group = ceil(_n / 10)

. 
. // Assign
. qui peerreview reviewer, r(3) by(group)

. egen mean = rowmean(review?)

. 
. // Check whether the rowmean is significantly different from its expectation
. qui reg mean i.reviewer

. margins i.reviewer, post

Adjusted predictions                            Number of obs     =     10,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    reviewer |
          1  |   5.991667   .0451774   132.63   0.000      5.90311    6.080223
          2  |   5.846333   .0451774   129.41   0.000     5.757777     5.93489
          3  |   5.816667   .0451774   128.75   0.000      5.72811    5.905223
          4  |   5.666667   .0451774   125.43   0.000      5.57811    5.755223
          5  |      5.584   .0451774   123.60   0.000     5.495443    5.672557
          6  |      5.368   .0451774   118.82   0.000     5.279443    5.456557
          7  |   5.340333   .0451774   118.21   0.000     5.251777     5.42889
          8  |      5.209   .0451774   115.30   0.000     5.120443    5.297557
          9  |      5.165   .0451774   114.33   0.000     5.076443    5.253557
         10  |   5.012333   .0451774   110.95   0.000     4.923777     5.10089
------------------------------------------------------------------------------

. 
. forval i = 1/10 {
  2.         local expectation = (1+2+3+4+5+6+7+8+9+10-`i')/9
  3.         local xlincom_exp `xlincom_exp' (`i'.reviewer - `expectation')
  4. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.reviewer - 6 = 0
        lc_2:  2.reviewer - 5.888888888888889 = 0
        lc_3:  3.reviewer - 5.777777777777778 = 0
        lc_4:  4.reviewer - 5.666666666666667 = 0
        lc_5:  5.reviewer - 5.555555555555555 = 0
        lc_6:  6.reviewer - 5.444444444444445 = 0
        lc_7:  7.reviewer - 5.333333333333333 = 0
        lc_8:  8.reviewer - 5.222222222222222 = 0
        lc_9:  9.reviewer - 5.111111111111111 = 0
       lc_10:  10.reviewer - 5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |  -.0083333   .0451774    -0.18   0.854    -.0968901    .0802235
        lc_2 |  -.0425556   .0451774    -0.94   0.346    -.1311124    .0460012
        lc_3 |   .0388889   .0451774     0.86   0.389    -.0496679    .1274457
        lc_4 |   4.13e-09   .0451774     0.00   1.000    -.0885568    .0885568
        lc_5 |   .0284444   .0451774     0.63   0.529    -.0601124    .1170012
        lc_6 |  -.0764444   .0451774    -1.69   0.091    -.1650012    .0121124
        lc_7 |       .007   .0451774     0.15   0.877    -.0815568    .0955568
        lc_8 |  -.0132222   .0451774    -0.29   0.770     -.101779    .0753346
        lc_9 |   .0538889   .0451774     1.19   0.233    -.0346679    .1424457
       lc_10 |   .0123333   .0451774     0.27   0.785    -.0762235    .1008901
------------------------------------------------------------------------------

. 
. // Check whether column mean is different from expectation
. collapse (mean) review*, by(group)

. reshape long review, i(group) j(nr)
(note: j = 1 2 3)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                     1000   ->    3000
Number of variables                   5   ->       4
j variable (3 values)                     ->   nr
xij variables:
                review1 review2 review3   ->   review
-----------------------------------------------------------------------------

. qui reg review i.nr

. margins i.nr, post

Adjusted predictions                            Number of obs     =      3,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          nr |
          1  |     5.5032    .024957   220.51   0.000     5.454265    5.552135
          2  |     5.5414    .024957   222.04   0.000     5.492465    5.590335
          3  |     5.4554    .024957   218.59   0.000     5.406465    5.504335
------------------------------------------------------------------------------

. 
. local xlincom_exp

. local expectation = (1+2+3+4+5+6+7+8+9+10) / 10

. forval i = 1/3 {
  2.         local xlincom_exp `xlincom_exp' (`i'.nr - `expectation')
  3. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.nr - 5.5 = 0
        lc_2:  2.nr - 5.5 = 0
        lc_3:  3.nr - 5.5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |      .0032    .024957     0.13   0.898    -.0457346    .0521346
        lc_2 |      .0414    .024957     1.66   0.097    -.0075346    .0903346
        lc_3 |     -.0446    .024957    -1.79   0.074    -.0935346    .0043346
------------------------------------------------------------------------------

. 
. log close
