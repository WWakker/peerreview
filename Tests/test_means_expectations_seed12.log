
. 
. // Setup
. set obs 10000
number of observations (_N) was 0, now 10,000

. gen reviewer = mod(_n - 1, 10) + 1

. gen group = ceil(_n / 10)

. 
. // Assign
. qui peerreview reviewer, r(3) by(group)

. egen mean = rowmean(review?)

. 
. // Check whether the rowmean is significantly different from its expectation
. qui reg mean i.reviewer

. margins i.reviewer, post

Adjusted predictions                            Number of obs     =     10,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    reviewer |
          1  |   6.030667   .0448893   134.35   0.000     5.942675    6.118659
          2  |   5.947333   .0448893   132.49   0.000     5.859341    6.035325
          3  |       5.74   .0448893   127.87   0.000     5.652008    5.827992
          4  |   5.646667   .0448893   125.79   0.000     5.558675    5.734659
          5  |      5.569   .0448893   124.06   0.000     5.481008    5.656992
          6  |      5.443   .0448893   121.25   0.000     5.355008    5.530992
          7  |   5.338667   .0448893   118.93   0.000     5.250675    5.426659
          8  |   5.246667   .0448893   116.88   0.000     5.158675    5.334659
          9  |   5.133333   .0448893   114.36   0.000     5.045341    5.221325
         10  |   4.904667   .0448893   109.26   0.000     4.816675    4.992659
------------------------------------------------------------------------------

. 
. forval i = 1/10 {
  2.         local expectation = (1+2+3+4+5+6+7+8+9+10-`i')/9
  3.         local xlincom_exp `xlincom_exp' (`i'.reviewer - `expectation')
  4. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.reviewer - 6 = 0
        lc_2:  2.reviewer - 5.888888888888889 = 0
        lc_3:  3.reviewer - 5.777777777777778 = 0
        lc_4:  4.reviewer - 5.666666666666667 = 0
        lc_5:  5.reviewer - 5.555555555555555 = 0
        lc_6:  6.reviewer - 5.444444444444445 = 0
        lc_7:  7.reviewer - 5.333333333333333 = 0
        lc_8:  8.reviewer - 5.222222222222222 = 0
        lc_9:  9.reviewer - 5.111111111111111 = 0
       lc_10:  10.reviewer - 5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |   .0306667   .0448893     0.68   0.495    -.0573254    .1186587
        lc_2 |   .0584444   .0448893     1.30   0.193    -.0295476    .1464365
        lc_3 |  -.0377778   .0448893    -0.84   0.400    -.1257698    .0502142
        lc_4 |       -.02   .0448893    -0.45   0.656     -.107992     .067992
        lc_5 |   .0134444   .0448893     0.30   0.765    -.0745476    .1014365
        lc_6 |  -.0014444   .0448893    -0.03   0.974    -.0894365    .0865476
        lc_7 |   .0053333   .0448893     0.12   0.905    -.0826587    .0933253
        lc_8 |   .0244444   .0448893     0.54   0.586    -.0635476    .1124365
        lc_9 |   .0222222   .0448893     0.50   0.621    -.0657698    .1102142
       lc_10 |  -.0953333   .0448893    -2.12   0.034    -.1833253   -.0073413
------------------------------------------------------------------------------

. 
. // Check whether column mean is different from expectation
. collapse (mean) review*, by(group)

. reshape long review, i(group) j(nr)
(note: j = 1 2 3)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                     1000   ->    3000
Number of variables                   5   ->       4
j variable (3 values)                     ->   nr
xij variables:
                review1 review2 review3   ->   review
-----------------------------------------------------------------------------

. qui reg review i.nr

. margins i.nr, post

Adjusted predictions                            Number of obs     =      3,000
Model VCE    : OLS

Expression   : Linear prediction, predict()

------------------------------------------------------------------------------
             |            Delta-method
             |     Margin   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          nr |
          1  |     5.5288   .0250887   220.37   0.000     5.479607    5.577993
          2  |     5.4695   .0250887   218.01   0.000     5.420307    5.518693
          3  |     5.5017   .0250887   219.29   0.000     5.452507    5.550893
------------------------------------------------------------------------------

. 
. local xlincom_exp

. local expectation = (1+2+3+4+5+6+7+8+9+10) / 10

. forval i = 1/3 {
  2.         local xlincom_exp `xlincom_exp' (`i'.nr - `expectation')
  3. }

. 
. // Result
. xlincom `xlincom_exp'

        lc_1:  1.nr - 5.5 = 0
        lc_2:  2.nr - 5.5 = 0
        lc_3:  3.nr - 5.5 = 0

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lc_1 |      .0288   .0250887     1.15   0.251    -.0203928    .0779928
        lc_2 |     -.0305   .0250887    -1.22   0.224    -.0796928    .0186928
        lc_3 |      .0017   .0250887     0.07   0.946    -.0474928    .0508928
------------------------------------------------------------------------------

. 
. log close
